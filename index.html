<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8">
<title>Index</title>

<style>
/* =========================
   Grundlayout
   ========================= */
body{
  background:#000;
  color:#e0e0e0;
  font-family:monospace
}
h1{color:#6cf}
ul{margin-bottom:30px}
#viewer{
  max-width:900px;
  margin-top:40px;
  line-height:1.5;
  color:#e0e0e0;
}

/* =========================
   Länkar – strikt uppdelning
   ========================= */

/* Endast navigeringslistan får blå färg */
#file-list a{
  color:#9cf;
  text-decoration:none;
}
#file-list a:hover{
  text-decoration:underline;
}

/* Markdown-innehåll: INGEN blå färg */
#viewer a{
  color:#e0e0e0;
  text-decoration:underline;
}
#viewer a:hover{
  color:#ffffff;
}

/* =========================================
   RP9 – Metalliska färger för matematik
   ========================================= */

/* Inline-matematik: silver */
.math.inline,
mjx-inline{
  color:#c0c0c0 !important;
  text-shadow:
    0 0 4px rgba(192,192,192,0.35),
    0 0 10px rgba(255,255,255,0.25);
  font-weight:500;
}

/* Block-matematik: guld */
.math.block,
mjx-container[jax="CHTML"][display="true"]{
  color:#d4af37 !important;
  text-shadow:
    0 0 6px rgba(212,175,55,0.4),
    0 0 14px rgba(255,215,0,0.3);
  font-weight:500;
}
</style>

<!-- Markdown -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- MathJax -->
<script>
window.MathJax={
  tex:{
    inlineMath:[['$','$']],
    displayMath:[['$$','$$']]
  },
  options:{
    renderActions:{
      addRP9Classes:[
        200,
        function(doc){
          doc.math.forEach(function(m){
            const n=m.typesetRoot;
            n.classList.add("math");
            n.classList.add(m.display ? "block" : "inline");
          });
        },
        ""
      ]
    }
  }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

</head>
<body>

<h1>Index</h1>
<ul id="file-list"></ul>

<h1>Filtyper som renderas</h1>
<ul>
<li>.html</li>
<li>.md</li>
<li>.markdown</li>
<li>.txt</li>
<li>.pdf</li>
<li>.png</li>
<li>.jpg</li>
<li>.jpeg</li>
<li>.gif</li>
<li>.svg</li>
<li>.zip</li>
<li>.csv</li>
<li>.json</li>
<li>.xml</li>
</ul>

<div id="viewer"></div>

<script>
const owner="AntonWallin999";
const repo="3";
const branch="main";

const allowedExtensions=[
  ".html",".md",".markdown",".txt",".pdf",
  ".png",".jpg",".jpeg",".gif",".svg",
  ".zip",".csv",".json",".xml"
];

fetch("https://api.github.com/repos/"+owner+"/"+repo+"/contents?ref="+branch)
.then(r=>r.json())
.then(files=>{
  const list=document.getElementById("file-list");

  files.forEach(file=>{
    if(file.type!=="file") return;

    const name=file.name.toLowerCase();
    if(!allowedExtensions.some(ext=>name.endsWith(ext))) return;

    const li=document.createElement("li");
    const a=document.createElement("a");
    a.textContent=file.name;

    if(name.endsWith(".md") || name.endsWith(".markdown")){
      a.href="#";
      a.onclick=function(){
        fetch(file.name)
        .then(r=>r.text())
        .then(t=>{
          document.getElementById("viewer").innerHTML=marked.parse(t);
          MathJax.typesetPromise();
        });
        return false;
      };
    }else{
      a.href=file.name;
      a.target="_blank";
    }

    li.appendChild(a);
    list.appendChild(li);
  });
});
</script>

</body>
</html>
