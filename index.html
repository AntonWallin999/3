<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8">
<title>Index</title>

<style>
/* =========================
   Grundlayout – INGET BLÅTT
   ========================= */
body{
  background:#000;
  color:#d0d0d0;
  font-family:monospace
}
h1{
  color:#c0c0c0;
  font-weight:600
}
ul{
  margin-bottom:30px
}
li{
  color:#b8b8b8
}

/* Länkar – tyst silver, inget blått */
a{
  color:#b8b8b8;
  text-decoration:none
}
a:hover{
  color:#e0e0e0;
  text-decoration:underline
}

/* Viewer */
#viewer{
  max-width:900px;
  margin-top:40px;
  line-height:1.5
}

/* =========================================
   RP9 – Metalliska färger (ENDA FÄRGKÄLLAN)
   ========================================= */

/* Inline-matematik: silver */
.math.inline,
mjx-inline {
  color:#c0c0c0 !important;
  text-shadow:
    0 0 4px rgba(192,192,192,0.35),
    0 0 10px rgba(255,255,255,0.25);
  font-weight:500;
  transition:color 0.3s ease;
}

/* Block-matematik: guld */
.math.block,
mjx-container[jax="CHTML"][display="true"] {
  color:#d4af37 !important;
  text-shadow:
    0 0 6px rgba(212,175,55,0.4),
    0 0 14px rgba(255,215,0,0.3);
  font-weight:500;
  transition:color 0.3s ease;
}

/* Hover-reflex */
.math.inline:hover,
mjx-inline:hover,
.math.block:hover,
mjx-container[jax="CHTML"][display="true"]:hover {
  text-shadow:
    0 0 8px rgba(255,255,255,0.45),
    0 0 16px rgba(255,255,255,0.35);
}
</style>

<!-- Markdown -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<!-- MathJax -->
<script>
window.MathJax={
  tex:{
    inlineMath:[['$','$']],
    displayMath:[['$$','$$']]
  },
  options:{
    renderActions:{
      addRP9Classes:[
        200,
        function(doc){
          doc.math.forEach(function(m){
            const n=m.typesetRoot;
            n.classList.add("math");
            n.classList.add(m.display ? "block" : "inline");
          });
        },
        ""
      ]
    }
  }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

</head>
<body>

<h1>Index</h1>
<ul id="file-list"></ul>

<h1>Filtyper som renderas</h1>
<ul>
<li>.html</li>
<li>.md</li>
<li>.markdown</li>
<li>.txt</li>
<li>.pdf</li>
<li>.png</li>
<li>.jpg</li>
<li>.jpeg</li>
<li>.gif</li>
<li>.svg</li>
<li>.zip</li>
<li>.csv</li>
<li>.json</li>
<li>.xml</li>
</ul>

<div id="viewer"></div>

<script>
const owner="AntonWallin999";
const repo="3";
const branch="main";

const allowedExtensions=[
  ".html",".md",".markdown",".txt",".pdf",
  ".png",".jpg",".jpeg",".gif",".svg",
  ".zip",".csv",".json",".xml"
];

fetch("https://api.github.com/repos/"+owner+"/"+repo+"/contents?ref="+branch)
.then(function(r){return r.json();})
.then(function(files){
  const list=document.getElementById("file-list");

  files.forEach(function(file){
    if(file.type!=="file") return;

    const name=file.name.toLowerCase();
    const ok=allowedExtensions.some(function(ext){
      return name.endsWith(ext);
    });
    if(!ok) return;

    const li=document.createElement("li");
    const a=document.createElement("a");
    a.textContent=file.name;

    if(name.endsWith(".md") || name.endsWith(".markdown")){
      a.href="#";
      a.onclick=function(){
        fetch(file.name)
        .then(function(r){return r.text();})
        .then(function(t){
          document.getElementById("viewer").innerHTML=marked.parse(t);
          MathJax.typesetPromise();
        });
        return false;
      };
    }else{
      a.href=file.name;
      a.target="_blank";
    }

    li.appendChild(a);
    list.appendChild(li);
  });
});
</script>

</body>
</html>
