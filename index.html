```html
<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="utf-8">
<title>Index</title>

<style>
body{
  background:#000;
  color:#d0d0d0;
  font-family:monospace;
  margin:0;
  padding:40px
}
h1{color:#c0c0c0;font-weight:600}
ul{margin-bottom:30px;padding-left:20px}
li{color:#b8b8b8}
a{color:#b8b8b8;text-decoration:none}
a:hover{color:#e0e0e0;text-decoration:underline}

#viewer-wrapper{
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:60px
}
#viewer{
  max-width:900px;
  width:100%;
  line-height:1.6;
  text-align:left
}
#viewer h1,#viewer h2,#viewer h3{color:#d8d8d8}
#viewer p{margin:1em 0}
#viewer ul{margin-left:20px}

/* ================================
   CODEBLOCK – GEMENSAM BAS
   ================================ */
#viewer pre{
  background:#000;
  margin:1.5em 0;
  padding:0;
  overflow-x:auto;
}
#viewer pre code{
  display:block;
  padding:0.8em 1em;
  background:transparent;
  color:#e0e0e0;
  font-family:monospace;
  font-size:0.95em;
  line-height:1.4;
}
#viewer pre:has(code.language-python){
  border-left:4px solid #ff8800;
}
#viewer pre:has(code.language-markdown),
#viewer pre:has(code.language-md){
  border-left:4px solid #2980ff;
  background:#1a1a1a;
}
#viewer pre:has(code.language-ascii){
  border-left:4px solid #f2f0e6;
}
#viewer pre:has(code.language-promt){
  border-left:4px solid #3cff3c;
}

/* ================================
   RP9 – MULTI-CALLOUT SYSTEM
   ================================ */
.callout[data-callout]{
  --primary:#ffffff;
  --secondary:#000000;
  --callout-color:var(--primary);
  --callout-icon:"⟡";
  border:2px solid transparent;
  border-radius:12px;
  border-image:
    linear-gradient(135deg,var(--primary),var(--secondary)) 1;
  padding:0.75rem 1rem 1rem 1rem;
  box-shadow:
    0 0 6px color-mix(in srgb,var(--primary) 70%,black),
    0 0 14px color-mix(in srgb,var(--primary) 40%,black);
  background:
    linear-gradient(180deg,rgba(0,0,0,0.35),rgba(0,0,0,0.15));
}
.callout[data-callout] .callout-title{
  font-weight:700;
  letter-spacing:0.04em;
  text-shadow:
    0 0 6px var(--primary),
    0 0 12px rgba(0,0,0,0.9);
}
.callout[data-callout] img{
  display:block;
  margin-left:auto;
  margin-right:auto;
}
.callout[data-callout="rp9"]{--primary:#2980ff}
.callout[data-callout="gul"]{--primary:#ffe600}
.callout[data-callout="blå"]{--primary:#00aaff}
.callout[data-callout="röd"]{--primary:#ff2e2e}
.callout[data-callout="grön"]{--primary:#00ff7f}
.callout[data-callout="orange"]{--primary:#ff8800}
.callout[data-callout="svartt"]{--primary:#666666}
.callout[data-callout="guld"]{--primary:#d4af37}
.callout[data-callout="silver"]{--primary:#c0c0c0}
.callout[data-callout="koppar"]{--primary:#b87333}

/* ================================
   MathJax
   ================================ */
.math.inline,mjx-inline{
  color:#c0c0c0 !important;
  text-shadow:0 0 4px rgba(192,192,192,0.35),
              0 0 10px rgba(255,255,255,0.25)
}
.math.block,mjx-container[jax="CHTML"][display="true"]{
  color:#d4af37 !important;
  text-shadow:0 0 6px rgba(212,175,55,0.4),
              0 0 14px rgba(255,215,0,0.3)
}

/* Bokläge */
body.book #file-list,
body.book h1:first-of-type,
body.book h1:nth-of-type(2),
body.book ul:nth-of-type(2){
  display:none;
}
body.book #viewer{
  max-width:1100px;
  margin:auto;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>

<body>

<h1>Index</h1>

<button id="toggle-recursive">Rekursiv: OFF</button>
<button id="toggle-book">Bokläge: OFF</button>

<input id="search" type="text" placeholder="Sök…" style="width:100%;margin-bottom:10px">

<ul id="file-list"></ul>

<h1>Filtyper som renderas</h1>
<ul>
<li>.html</li><li>.md</li><li>.markdown</li><li>.txt</li>
<li>.pdf</li><li>.png</li><li>.jpg</li><li>.jpeg</li>
<li>.gif</li><li>.svg</li><li>.zip</li>
<li>.csv</li><li>.json</li><li>.xml</li>
</ul>

<div id="viewer-wrapper">
  <div>
    <div id="toc"></div>
    <div id="viewer"></div>
  </div>
</div>

<script>
const owner="AntonWallin999",repo="3",branch="main";
const allowedExtensions=[".html",".md",".markdown",".txt",".pdf",".png",".jpg",".jpeg",".gif",".svg",".zip",".csv",".json",".xml"];
let apiCalls=0,API_LIMIT=55;

function safeFetch(url){
  if(apiCalls>=API_LIMIT) return Promise.reject("Rate limit");
  apiCalls++; return fetch(url);
}

let recursiveMode=false,bookMode=false;
toggleRecursive.onclick=()=>{recursiveMode=!recursiveMode;toggleRecursive.textContent="Rekursiv: "+(recursiveMode?"ON":"OFF");fileList.innerHTML="";recursiveMode?listRecursive(""):listRootOnly()};
toggleBook.onclick=()=>{bookMode=!bookMode;document.body.classList.toggle("book",bookMode);toggleBook.textContent="Bokläge: "+(bookMode?"ON":"OFF")};

search.oninput=()=>{const q=search.value.toLowerCase();document.querySelectorAll("#file-list li").forEach(li=>li.style.display=li.textContent.toLowerCase().includes(q)?"":"none")};

function listRootOnly(){safeFetch(`https://api.github.com/repos/${owner}/${repo}/contents?ref=${branch}`).then(r=>r.json()).then(renderFiles)}
function listRecursive(path){safeFetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`).then(r=>r.json()).then(items=>items.forEach(i=>i.type==="dir"?listRecursive(i.path):renderFiles([i])))}

function renderFiles(files){
  files.forEach(f=>{
    if(f.type!=="file")return;
    if(!allowedExtensions.some(e=>f.name.toLowerCase().endsWith(e)))return;
    const li=document.createElement("li"),a=document.createElement("a");
    a.textContent=f.path||f.name;
    if(f.name.match(/\.(md|markdown)$/i)){
      a.href="#";
      a.onclick=()=>{fetch(f.path||f.name).then(r=>r.text()).then(t=>{viewer.innerHTML=marked.parse(t);buildTOC();MathJax.typesetPromise()});return false}
    }else{a.href=f.path||f.name;a.target="_blank"}
    li.appendChild(a);fileList.appendChild(li)
  })
}

function buildTOC(){
  toc.innerHTML="<strong>Innehåll</strong>";
  const ul=document.createElement("ul");
  document.querySelectorAll("#viewer h1,#viewer h2,#viewer h3").forEach((h,i)=>{
    h.id="toc_"+i;
    const li=document.createElement("li");
    li.style.marginLeft=h.tagName==="H2"?"15px":h.tagName==="H3"?"30px":"0";
    const a=document.createElement("a");
    a.href="#"+h.id;a.textContent=h.textContent;
    li.appendChild(a);ul.appendChild(li)
  });
  toc.appendChild(ul)
}

listRootOnly();
</script>

</body>
</html>
```
